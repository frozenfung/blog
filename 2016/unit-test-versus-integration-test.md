
#Unit test 與 Integration test 概論

##不知不覺做網站開發也過了一年，回想起自己剛進公司的第一項任務就是修補 iOS & Android API 的 Spec。那時候的我接觸有系統的軟體開發還不到半年，不理解如果一個產品要走的長遠，必須認真寫測試。因為不理解軟體開發的特性，以及開發經驗不足，所以只記得那一項任務做的…

##Unit test 與 Integration test 概論

不知不覺做網站開發也過了一年，回想起自己剛進公司的第一項任務就是修補 iOS & Android API 的 Spec。那時候的我接觸有系統的軟體開發還不到半年，不理解如果一個產品要走的長遠，必須認真寫測試。因為不理解軟體開發的特性，以及開發經驗不足，所以只記得那一項任務做的有點心虛，那種感覺就好像在一個深三米的游泳池裡，從左游到右，再從右游到左，怎麼樣也搆不到地。

最近補完之前結帳頁面的測試之後，覺得自己好像比較能夠理解 Unit test 和 Integration test 分別是用的情境，就用這篇文章記錄下來。

下面會分成三個部分來討論

* 如何分辨 Unit test 與 Integration test

* Unit test 與 Integration test 的特性

* Unit test 與 Integration test 在不同維度的下的變化

###如何分辨 Unit test 和 Integration test

假設我們現在手上有一隻手電筒，組成手電筒的有三個部分

* 鎢絲燈泡

* 電池

* 開關

Unit test 的內容是以單一功能為對象的單元測試。用手電筒當例子，單元測試就會是測試電池有沒有電，鎢絲燈泡能不能正常發亮。而 Integration test 的內容通常會由一連串的單元測試組成，而唯有當這些 Unit test 全部通過，Integration test 也才算通過。以手電筒來舉例，Integration test 的測試行為可能就是打開手電筒的開關，而預測結果是手電筒指向的黑暗處被照亮。你可以想像這個情境必須是在鎢絲燈泡、電池以及開關都正常運作的情況之下才能夠達成。

###Unit test 與 Integration test 的特性

看了上面關於如何分辨 Unit test 和 Integration test 的範例，應該能夠比較理解這兩種測試的情境。這個章節會用不同的角度，也就是兩種測試所擁有不同的特性條列式的切入。

首先是 Unit test

* 比較單純，容易撰寫

* 測試的範圍比較小

* 主要功能是給開發者更容易 debug

再來是 Integration test

* 有時候需要 UI 介面跟資料庫的共同合作

* 測試的範圍比較廣

* 主要功能是對人做整合性的展示

###Unit test 與 Integration test 在不同維度下的變化

Unit test 跟 Integration test 在不同的維度下，有時候會互相轉換。舉例來說，如果今天我們的對像是一個手電筒，那麼測試行為就是打開手電筒的開關，而預測結果是手電筒指向的黑暗處被照亮，這樣算是一個 Integration test（在第一個章節有更詳細的討論）。但是如果現在對象從手電筒變成一台汽車，那麼測試行為是打開車燈的開關，而預測結果是車燈方向的黑暗處被照亮，這樣的一個測試只能算是 Unit test。

對使用者來說，車燈在汽車裡面扮演的角色只能算是相對重要，使用者更關心的會是車子能不能順利行駛到目的地。所以我認為在這個狀況下，測試行為是使用者拿到鑰匙，而預測結果是車子能夠順利啟動並且行駛至目的地，這樣的一個測試才能夠被成為 Integration test。

###結論

開發 Unit test 和 Integration test 雖然要花上甚至比開發軟體更多的時間，不過對於提升軟體的穩定度很有幫助。如果資源有限只能選一種的話，建議從 Unit test 開始。
